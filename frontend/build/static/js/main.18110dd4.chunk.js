(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(t,e){var s="http://127.0.0.1:8080/api",r={login:s+"/user/login",storeItem:s+"/storeItem",cart:s+"/cart"};t.exports=r},29:function(t,e,s){},30:function(t,e,s){},32:function(t,e,s){},50:function(t,e,s){},51:function(t,e,s){},52:function(t,e,s){},53:function(t,e,s){},54:function(t,e,s){},55:function(t,e,s){},56:function(t,e,s){"use strict";s.r(e);var r=s(0),n=s(1),a=s.n(n),c=s(22),i=s.n(c),o=(s(29),s(30),s(3)),u=s.n(o),l=s(10),h=s(4),d=s(5),p=s(2),j=s(7),m=s(6),b=(s(32),function(t){Object(j.a)(s,t);var e=Object(m.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).state={title:"Web Store"},r}return Object(d.a)(s,[{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsx)("h1",{id:"title-header",children:this.state.title})})}}]),s}(a.a.Component)),O=s(8),v=s.n(O),f=(s(50),s(11)),I=s.n(f),x=function(t){Object(j.a)(s,t);var e=Object(m.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).state={title:"Login"},r.usernameInput=a.a.createRef(),r.passwordInput=a.a.createRef(),r.loginHandler=r.loginHandler.bind(Object(p.a)(r)),r.logoutHandler=r.logoutHandler.bind(Object(p.a)(r)),r}return Object(d.a)(s,[{key:"loginHandler",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.usernameInput.current.value||!this.passwordInput.current.value){t.next=17;break}return e={email:this.usernameInput.current.value,password:this.passwordInput.current.value},t.prev=2,t.next=5,v.a.post(I.a.login,e);case 5:s=t.sent,this.props.setUser(s.data.user),this.props.setJWT(s.data.jwt),this.props.setCart(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0),alert("Log In Failed");case 15:t.next=18;break;case 17:alert("Please enter a username and password");case 18:case"end":return t.stop()}}),t,this,[[2,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"logoutHandler",value:function(){this.props.logout()}},{key:"showLogin",value:function(){return this.props.user?Object(r.jsxs)("div",{children:[Object(r.jsxs)("h2",{children:["Welcome, ",this.props.user.firstName]}),Object(r.jsx)("button",{onClick:this.logoutHandler,children:"Log Out"})]}):Object(r.jsxs)("div",{id:"login-component",children:[Object(r.jsx)("h2",{children:"Log In"}),Object(r.jsx)("input",{id:"inputUsername",className:"login-group",placeholder:"username",ref:this.usernameInput}),Object(r.jsx)("input",{id:"inputPassword",className:"login-group",placeholder:"password",ref:this.passwordInput}),Object(r.jsx)("button",{className:"login-group",onClick:this.loginHandler,children:"Submit"})]})}},{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsx)(n.Fragment,{children:this.showLogin()})})}}]),s}(a.a.Component),w=s(12),y=s.n(w),k=(s(51),function(t){Object(j.a)(s,t);var e=Object(m.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).state={title:"Recently Viewed"},r.showRecentItems=r.showRecentItems.bind(Object(p.a)(r)),r}return Object(d.a)(s,[{key:"componentDidUpdate",value:function(t){this.props.recentStoreItemsViewed!==t.recentStoreItemsViewed&&this.showRecentItems()}},{key:"showRecentItems",value:function(){if(this.props.recentStoreItemsViewed){var t=[];return this.props.recentStoreItemsViewed.forEach((function(e){t.push(Object(r.jsx)("li",{id:"recent-item",children:e.name},e._id))})),Object(r.jsx)("ol",{children:t})}}},{key:"render",value:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:this.state.title}),Object(r.jsx)(y.a,{stopScrollPropagation:!0,smoothScrolling:!0,className:"small-scroll-area",children:this.showRecentItems})]})}}]),s}(a.a.Component)),g=function(t){Object(j.a)(s,t);var e=Object(m.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).onRemoveCartItem=r.onRemoveCartItem.bind(Object(p.a)(r)),r}return Object(d.a)(s,[{key:"onRemoveCartItem",value:function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.delete(I.a.cart,{headers:{Authorization:"Bearer: ".concat(this.props.jwt)},params:{userId:this.props.user._id,cartItemId:this.props.cartItem._id,quantity:this.props.cartItem.quantity}});case 3:this.props.setCart(),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0),alert("Request failed");case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:this.props.cartItem.storeItem.name}),Object(r.jsxs)("td",{className:"money-color",children:["$",this.props.cartItem.storeItem.price]}),Object(r.jsx)("td",{children:this.props.cartItem.quantity}),Object(r.jsxs)("td",{className:"money-color",children:["$",parseInt(this.props.cartItem.quantity)*parseFloat(this.props.cartItem.storeItem.price)]}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{onClick:function(){return t.onRemoveCartItem()},children:"X"})})]})}}]),s}(a.a.Component),C=(s(52),function(t){Object(j.a)(s,t);var e=Object(m.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).state={title:"Cart"},r.showCartItems=r.showCartItems.bind(Object(p.a)(r)),r.showCartTotal=r.showCartTotal.bind(Object(p.a)(r)),r}return Object(d.a)(s,[{key:"componentDidUpdate",value:function(t){this.props.cartItems,t.cartItems}},{key:"getCartTotal",value:function(){}},{key:"showCartItems",value:function(){var t=this,e=this.props.cartItems.map((function(e){return Object(r.jsx)(g,{setCart:t.props.setCart,cartItem:e,user:t.props.user,jwt:t.props.jwt},e._id)}));if(this.props.user)return e&&e.length>0?Object(r.jsx)("div",{children:Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Item"}),Object(r.jsx)("th",{children:"Price"}),Object(r.jsx)("th",{children:"Quantity"}),Object(r.jsx)("th",{children:"Total"})]})}),Object(r.jsx)("tbody",{children:e})]})}):Object(r.jsx)("h4",{id:"empty",children:"Empty"})}},{key:"showCartTotal",value:function(){if(this.props.user&&this.props.cartItems&&this.props.cartItems.length>0){var t=this.props.cartItems.reduce((function(t,e){return t+parseInt(e.quantity)*parseInt(e.storeItem.price)}),0);return Object(r.jsxs)("h4",{children:["Total: $",t]})}}},{key:"render",value:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:this.state.title}),this.showCartTotal,Object(r.jsx)(y.a,{stopScrollPropagation:!0,smoothScrolling:!0,className:"small-scroll-area",children:this.showCartItems})]})}}]),s}(a.a.Component)),S=s(23),R=(s(53),function(t){Object(j.a)(s,t);var e=Object(m.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).state={title:"Store Items",storeItems:[],listItems:[],sort_asc:!0},r.onItemClicked=r.onItemClicked.bind(Object(p.a)(r)),r.onAddToCart=r.onAddToCart.bind(Object(p.a)(r)),r.showlistItems=r.showlistItems.bind(Object(p.a)(r)),r.onSort=r.onSort.bind(Object(p.a)(r)),r.onSearch=r.onSearch.bind(Object(p.a)(r)),r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get(I.a.storeItem);case 3:e=t.sent,this.setState({storeItems:e.data},this.createItems),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),alert("Store Items not available");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}()},{key:"createItems",value:function(){var t=this,e=[];this.state.storeItems.forEach((function(s){e.push(Object(r.jsxs)("li",{className:"item",name:s.name,children:[Object(r.jsx)("button",{className:"item-name",onClick:function(){return t.onItemClicked(s)},children:s.name}),Object(r.jsxs)("span",{className:"item-price money-color",children:["$",s.price]}),Object(r.jsx)("button",{className:"item-add",onClick:function(){return t.onAddToCart(s)},children:"Add"})]},s._id))})),this.setState({listItems:e})}},{key:"onItemClicked",value:function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get(I.a.storeItem,{headers:{Authorization:"Bearer: ".concat(this.props.jwt)},params:{id:e._id}});case 3:this.props.setRecentlyViewedItems(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},{key:"onAddToCart",value:function(){var t=Object(l.a)(u.a.mark((function t(e){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.user){t.next=15;break}return s={headers:{Authorization:"Bearer: ".concat(this.props.jwt)},params:{userId:this.props.user._id,storeItemId:e._id,quantity:1}},t.prev=2,t.next=5,v.a.post(I.a.cart,null,s);case 5:t.sent,this.props.setCart(),this.props.setRecentlyViewedItems(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:t.next=16;break;case 15:alert("Please Log In");case 16:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"showlistItems",value:function(){return this.state.listItems}},{key:"onSort",value:function(t){var e=this;this.setState({sort_asc:!this.state.sort_asc});var s=Object(S.a)(this.state.listItems).sort((function(t,s){return t.props.name>s.props.name?e.state.sort_asc?-1:1:t.props.name<s.props.name?e.state.sort_asc?1:-1:0}));this.setState({listItems:s}),t.preventDefault()}},{key:"onSearch",value:function(){var t=Object(l.a)(u.a.mark((function t(e){var s,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=document.getElementById("item-search-input").value,t.next=3,v.a.get(I.a.storeItem,{params:{expr:s}});case 3:r=t.sent,this.setState({storeItems:r.data},this.createItems),e.preventDefault();case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsxs)("div",{id:"store-component",children:[Object(r.jsx)("h2",{id:"store-title",children:this.state.title}),Object(r.jsx)("input",{id:"item-search-input",onChange:this.onSearch,placeholder:"search..."}),Object(r.jsx)("button",{id:"sort-btn",onClick:this.onSort,children:"Sort"}),Object(r.jsx)(y.a,{stopScrollPropagation:!0,smoothScrolling:!0,className:"store-scroll-area",children:Object(r.jsx)("ul",{id:"item-list",children:this.showlistItems()})})]})}}]),s}(a.a.Component)),N=(s(54),function(t){Object(j.a)(s,t);var e=Object(m.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).state={text:"Created 2020",author:"Jon Pierre"},r}return Object(d.a)(s,[{key:"render",value:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{className:"footer-text",children:this.state.text}),Object(r.jsx)("p",{className:"footer-text",children:this.state.author})]})}}]),s}(a.a.Component)),T=(s(55),function(t){Object(j.a)(s,t);var e=Object(m.a)(s);function s(t){var r;return Object(h.a)(this,s),(r=e.call(this,t)).state={user:null,jwt:"",cartItems:[],recentStoreItemsViewed:[]},r.setUser=r.setUser.bind(Object(p.a)(r)),r.setJWT=r.setJWT.bind(Object(p.a)(r)),r.setCart=r.setCart.bind(Object(p.a)(r)),r.setRecentlyViewedItems=r.setRecentlyViewedItems.bind(Object(p.a)(r)),r.logout=r.logout.bind(Object(p.a)(r)),r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.setRecentlyViewedItems()}},{key:"logout",value:function(){this.setState({user:null,jwt:"",cartItems:[]})}},{key:"setUser",value:function(t){this.setState({user:t})}},{key:"setJWT",value:function(t){this.setState({jwt:t})}},{key:"setCart",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.state.user){t.next=12;break}return e={headers:{Authorization:"Bearer: ".concat(this.state.jwt)},params:{userId:this.state.user._id}},t.prev=2,t.next=5,v.a.get(I.a.cart,e);case 5:s=t.sent,this.setState({cartItems:s.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),alert("Cart Items Unavailable");case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"setRecentlyViewedItems",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e,s,r=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:10,t.prev=1,t.next=4,v.a.get(I.a.storeItem,{headers:{Authorization:"Bearer: ".concat(this.state.jwt)},params:{recent:e}});case 4:s=t.sent,this.setState({recentStoreItemsViewed:s.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsxs)("div",{id:"container",children:[Object(r.jsx)("div",{id:"title",className:"component",children:Object(r.jsx)(b,{})}),Object(r.jsx)("div",{id:"login",className:"component",children:Object(r.jsx)(x,{user:this.state.user,setUser:this.setUser,jwt:this.state.jwt,setJWT:this.setJWT,setCart:this.setCart,logout:this.logout})}),Object(r.jsxs)("section",{id:"user-section",children:[Object(r.jsx)("div",{id:"recent",className:"component",children:Object(r.jsx)(k,{user:this.state.user,jwt:this.state.jwt,recentStoreItemsViewed:this.state.recentStoreItemsViewed,setRecentlyViewedItems:this.setRecentlyViewedItems})}),Object(r.jsx)("div",{id:"cart",className:"component",children:Object(r.jsx)(C,{user:this.state.user,jwt:this.state.jwt,cartItems:this.state.cartItems,setCart:this.setCart})})]}),Object(r.jsx)("div",{id:"store",className:"component",children:Object(r.jsx)(R,{user:this.state.user,jwt:this.state.jwt,setCart:this.setCart,setRecentlyViewedItems:this.setRecentlyViewedItems})}),Object(r.jsx)("div",{id:"footer",className:"component",children:Object(r.jsx)(N,{})})]})}}]),s}(a.a.Component));var V=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(T,{})})},_=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,57)).then((function(e){var s=e.getCLS,r=e.getFID,n=e.getFCP,a=e.getLCP,c=e.getTTFB;s(t),r(t),n(t),a(t),c(t)}))};v.a.defaults.withCredentials=!0,i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(V,{})}),document.getElementById("root")),_()}},[[56,1,2]]]);
//# sourceMappingURL=main.18110dd4.chunk.js.map